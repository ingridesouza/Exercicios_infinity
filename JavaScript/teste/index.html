<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Converter</title>
</head>
<body>
    <h1>Crypto Converter</h1>
    
    <label for="from">De:</label>
    <select id="from">
        <!-- Opções de criptomoedas -->
    </select>
    <br>
    
    <label for="to">Para:</label>
    <select id="to">
        <!-- Opções de criptomoedas -->
    </select>
    <br>
    
    <label for="amount">Quantidade:</label>
    <input type="number" id="amount" min="0">
    <br>
    
    <button id="convertBtn">Converter</button>
    <br>
    
    <div id="result"></div>

    <script>
        // Função para obter a lista de criptomoedas disponíveis na API CoinGecko
        async function getCryptoList() {
            try {
                const response = await fetch('https://api.coingecko.com/api/v3/coins/list');
                const data = await response.json();
                return data.map(coin => coin.symbol);
            } catch (error) {
                console.error('Erro ao obter a lista de criptomoedas:', error);
                return [];
            }
        }

        // Preencher as opções dos selects com as criptomoedas disponíveis
        async function populateCryptoOptions() {
            const cryptoList = await getCryptoList();
            const selectFrom = document.getElementById('from');
            const selectTo = document.getElementById('to');

            cryptoList.forEach(symbol => {
                const optionFrom = document.createElement('option');
                const optionTo = document.createElement('option');

                optionFrom.value = symbol;
                optionTo.value = symbol;
                optionFrom.textContent = symbol;
                optionTo.textContent = symbol;

                selectFrom.appendChild(optionFrom);
                selectTo.appendChild(optionTo);
            });
        }

        populateCryptoOptions();

        // Função para converter as criptomoedas
        async function convertCurrency() {
            const fromCurrency = document.getElementById('from').value;
            const toCurrency = document.getElementById('to').value;
            const amount = document.getElementById('amount').value;

            try {
                const response = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${fromCurrency}&vs_currencies=${toCurrency}`);
                const data = await response.json();

                if (data && data[fromCurrency] && data[fromCurrency][toCurrency]) {
                    const rate = data[fromCurrency][toCurrency];
                    const convertedAmount = amount * rate;
                    document.getElementById('result').textContent = `${amount} ${fromCurrency.toUpperCase()} = ${convertedAmount.toFixed(2)} ${toCurrency.toUpperCase()}`;
                } else {
                    document.getElementById('result').textContent = "Erro na conversão. Por favor, tente novamente.";
                }
            } catch (error) {
                console.error('Erro ao converter moeda:', error);
                document.getElementById('result').textContent = "Erro na conversão. Por favor, tente novamente.";
            }
        }

        // Event listener para o botão de conversão
        document.getElementById('convertBtn').addEventListener('click', convertCurrency);
    </script>
</body>
</html>
